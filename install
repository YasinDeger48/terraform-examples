# #!/bin/bash

# # Sistemi güncelleme
# sudo apt update -y

# # ---------------------------------------
# # Java 17 Adoptium Kurulumu
# # ---------------------------------------

# # Java 17 Adoptium indirme linki
# JDK_URL="https://github.com/adoptium/temurin17-binaries/releases/download/jdk-17.0.8+7/OpenJDK17U-jdk_x64_linux_hotspot_17.0.8_7.tar.gz"

# # İndirme işlemi
# echo "Java 17 Adoptium indiriliyor..."
# wget -q --show-progress $JDK_URL -O OpenJDK17.tar.gz

# # Arşivi çıkarma işlemi
# echo "Java 17 arşivi çıkarılıyor..."
# tar -xvzf OpenJDK17.tar.gz

# # Çıkarılan klasörün adını bulma
# JDK_DIR=$(tar -tzf OpenJDK17.tar.gz | head -1 | cut -f1 -d"/")

# # JAVA_HOME ve PATH değişkenlerini ekleme
# echo "JAVA_HOME ve PATH ayarlanıyor..."
# echo "export JAVA_HOME=$HOME/$JDK_DIR" >> ~/.bashrc
# echo "export PATH=\$JAVA_HOME/bin:\$PATH" >> ~/.bashrc

# # .bashrc dosyasını yükleyerek değişiklikleri aktif hale getirme
# source ~/.bashrc

# # Java versiyonunu doğrulama
# echo "Kurulum tamamlandı. Java versiyonu:"
# java -version

# # Temizlik (İndirilen arşiv dosyasını silme)
# rm OpenJDK17.tar.gz

# echo "Java 17 Adoptium başarıyla kuruldu!"

# # ---------------------------------------
# # Docker Kurulumu
# # ---------------------------------------

# # Docker GPG anahtarı ekleniyor
# echo "Docker kuruluyor..."
# sudo apt-get install \
#     ca-certificates \
#     curl \
#     gnupg \
#     lsb-release -y

# sudo mkdir -p /etc/apt/keyrings
# curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg

# # Docker deposu ekleniyor
# echo \
#   "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \
#   $(lsb_release -cs) stable" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null

# # Docker yükleniyor
# sudo apt update -y
# sudo apt-get install docker-ce docker-ce-cli containerd.io docker-compose-plugin -y

# # Docker kurulumu doğrulama
# sudo docker --version

# # Docker servislerini başlatma
# sudo systemctl enable docker
# sudo systemctl start docker

# # ---------------------------------------
# # Jenkins Kurulumu
# # ---------------------------------------

# echo "Jenkins kuruluyor..."
# sudo wget -O /usr/share/keyrings/jenkins-keyring.asc https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key
# echo "deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] https://pkg.jenkins.io/debian-stable binary/" | sudo tee /etc/apt/sources.list.d/jenkins.list > /dev/null
# sudo apt-get update -y
# sudo apt-get install jenkins -y

# # Jenkins servisini başlatma
# sudo systemctl enable jenkins
# sudo systemctl start jenkins

# # Jenkins durumu kontrol etme
# sudo systemctl status jenkins

# # ---------------------------------------
# # SonarQube Kurulumu
# # ---------------------------------------

# # PostgreSQL kurulumu (SonarQube için gereklidir)
# echo "PostgreSQL kuruluyor..."
# sudo apt-get install postgresql postgresql-contrib -y

# # PostgreSQL ayarları
# sudo -i -u postgres psql -c "CREATE USER sonar WITH PASSWORD 'sonar';"
# sudo -i -u postgres psql -c "CREATE DATABASE sonarqube OWNER sonar;"

# # SonarQube yükleme
# echo "SonarQube kuruluyor..."
# sudo apt-get install unzip -y
# wget https://binaries.sonarsource.com/Distribution/sonarqube/sonarqube-9.9.2.50621.zip
# unzip sonarqube-9.9.2.50621.zip -d /opt
# sudo mv /opt/sonarqube-9.9.2.50621 /opt/sonarqube

# # SonarQube servisini başlatma
# sudo useradd -r -s /bin/false sonar
# sudo chown -R sonar:sonar /opt/sonarqube
# sudo -u sonar /opt/sonarqube/bin/linux-x86-64/sonar.sh start

# # ---------------------------------------
# # Trivy Kurulumu
# # ---------------------------------------

# echo "Trivy kuruluyor..."
# sudo apt-get install wget apt-transport-https gnupg lsb-release -y
# wget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo tee /etc/apt/trusted.gpg.d/aquasecurity.asc
# echo deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main | sudo tee /etc/apt/sources.list.d/trivy.list
# sudo apt update -y
# sudo apt install trivy -y

# # Trivy kurulumunu doğrulama
# trivy --version

# # Kurulum tamamlandı
# echo "Tüm araçlar başarıyla kuruldu!"

